---
import Layout from '@layouts/Layout.astro';
import { Skull, House, ShoppingBag, Star } from '@lucide/astro';
import DiamondPattern from "@c/ui/DiamondPattern.astro";
import GoldenLine from "@c/ui/GoldenLine.astro";
import CornerOrnaments from "@c/ui/CornerOrnaments.astro";
---

<Layout
  title="Página No Encontrada"
  description="Lo sentimos. La página que buscas no está disponible en Mystovia."
  noindex={true}
>
  <section class="grow z-100 flex items-center justify-center min-h-screen py-12 px-4">
    <div class="relative max-w-2xl w-full overflow-hidden">
      <!-- Medieval container background -->
      <div class="absolute inset-0 rounded-xl bg-gradient-to-b from-gray-900/95 via-gray-900/98 to-black/95 border border-yellow-600/20"></div>

      <GoldenLine position="top" />
      <DiamondPattern opacity={0.03} class="rounded-xl" />
      <CornerOrnaments variant="curve" size="md" opacity={0.2} />

      <!-- Content -->
      <div class="relative z-10 p-6 sm:p-10 text-center">
        <!-- Decorative header -->
        <div class="flex items-center justify-center gap-3 mb-4">
          <div class="h-px w-8 sm:w-16 bg-gradient-to-r from-transparent to-yellow-500/50"></div>
          <Skull class="w-6 h-6 sm:w-8 sm:h-8 text-yellow-500/60" />
          <div class="h-px w-8 sm:w-16 bg-gradient-to-l from-transparent to-yellow-500/50"></div>
        </div>

        <!-- 404 Number -->
        <h1 class="text-7xl sm:text-9xl font-bold text-yellow-600 medieval-font mb-2 drop-shadow-[0_0_15px_rgba(202,138,4,0.3)]">
          404
        </h1>

        <!-- Decorative divider -->
        <div class="flex items-center justify-center gap-2 mb-6">
          <div class="h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-yellow-600/50 to-transparent"></div>
          <div class="w-2 h-2 rotate-45 bg-yellow-600/50"></div>
          <div class="h-px w-12 sm:w-20 bg-gradient-to-l from-transparent via-yellow-600/50 to-transparent"></div>
        </div>

        <!-- Title -->
        <h2 id="notFoundTitle" class="text-2xl sm:text-3xl font-bold text-white medieval-font mb-4">
          Página No Encontrada
        </h2>

        <!-- Message -->
        <p id="notFoundMessage" class="text-base sm:text-lg text-gray-300 mb-6 px-2">
          Lo sentimos. La página que buscas no está disponible.
        </p>

        <!-- Info box -->
        <div class="relative mb-8 p-4 sm:p-6 rounded-lg overflow-hidden">
          <div class="absolute inset-0 bg-gray-800/50 border border-gray-700/50 rounded-lg"></div>
          <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-600/30 to-transparent"></div>
          <div class="relative z-10">
            <p id="notFoundExplanation" class="text-sm sm:text-base text-gray-400 mb-3">
              Es posible que la página haya sido movida, eliminada o que la URL sea incorrecta.
            </p>
            <p id="notFoundThanks" class="text-yellow-500 font-semibold text-base sm:text-lg medieval-font">
              ¡Gracias por jugar en Mystovia!
            </p>
          </div>
        </div>

        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
          <a
            id="backHomeBtn"
            href="/"
            class="medieval-btn group inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-b from-yellow-600 to-yellow-700 hover:from-yellow-500 hover:to-yellow-600 text-white font-semibold rounded-lg transition-all duration-300 border border-yellow-500/30 shadow-[0_0_15px_rgba(202,138,4,0.2)] hover:shadow-[0_0_20px_rgba(202,138,4,0.4)]"
          >
            <House class="w-4 h-4 group-hover:scale-110 transition-transform" />
            <span>Volver al Inicio</span>
          </a>
          <a
            id="goMarketplaceBtn"
            href="/marketplace"
            class="medieval-btn-secondary group inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-b from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-white font-semibold rounded-lg transition-all duration-300 border border-gray-600/30"
          >
            <ShoppingBag class="w-4 h-4 group-hover:scale-110 transition-transform" />
            <span>Ir al Marketplace</span>
          </a>
        </div>

        <!-- Bottom decorative element -->
        <figure class="flex items-center justify-center gap-3 mt-8" aria-hidden="true">
          <span class="h-px w-8 sm:w-12 bg-gradient-to-r from-transparent to-yellow-500/30"></span>
          <Star class="w-4 h-4 text-yellow-500/40" fill="currentColor" />
          <span class="h-px w-8 sm:w-12 bg-gradient-to-l from-transparent to-yellow-500/30"></span>
        </figure>
      </div>
    </div>
  </section>
</Layout>

<script>
  import { t, getStoredLanguage } from '../i18n/translations';

  function applyTranslations() {
    const lang = getStoredLanguage();

    const title = document.getElementById('notFoundTitle');
    if (title) title.textContent = t('notFound.title', lang);

    const message = document.getElementById('notFoundMessage');
    if (message) message.textContent = t('notFound.message', lang);

    const explanation = document.getElementById('notFoundExplanation');
    if (explanation) explanation.textContent = t('notFound.explanation', lang);

    const thanks = document.getElementById('notFoundThanks');
    if (thanks) thanks.textContent = t('notFound.thanks', lang);

    const backHome = document.getElementById('backHomeBtn');
    if (backHome) {
      const span = backHome.querySelector('span');
      if (span) span.textContent = t('common.backHome', lang);
    }

    const goMarketplace = document.getElementById('goMarketplaceBtn');
    if (goMarketplace) {
      const span = goMarketplace.querySelector('span');
      if (span) span.textContent = t('notFound.goToMarketplace', lang);
    }
  }

  applyTranslations();
  document.addEventListener('astro:page-load', applyTranslations);
</script>
