---
import { LoaderCircle } from "@lucide/astro";

interface Props {
  label: string;
  loading?: boolean;
  id?: string;
  variant?: 'primary' | 'secondary' | 'danger';
  loadingText?: string;
}

const { label, loading = false, id, variant = 'primary', loadingText = 'Cargando...' } = Astro.props;

const variants = {
  primary: 'medieval-btn-primary',
  secondary: 'medieval-btn-secondary',
  danger: 'medieval-btn-danger'
};
---

<button
  type="submit"
  id={id}
  class:list={[
    'medieval-btn',
    variants[variant],
    { 'opacity-75 cursor-not-allowed': loading }
  ]}
  disabled={loading}
>
  {loading ? (
    <LoaderCircle class="animate-spin h-4 w-4" />
  ) : null}
  <span class="submit-btn-text" data-label={label} data-loading-text={loadingText}>{loading ? loadingText : label}</span>
</button>

<style>
  .medieval-btn {
    position: relative;
    width: 100%;
    height: 38px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    font-family: "Cinzel", serif;
    letter-spacing: 0.5px;
    cursor: pointer;
    font-weight: 600;
    border-radius: 0.5rem;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    overflow: hidden;
  }

  .medieval-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.3), transparent);
    pointer-events: none;
  }

  .medieval-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.05;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0L60 30L30 60L0 30z' fill='%23ffffff' fill-opacity='0.4'/%3E%3C/svg%3E");
    background-size: 20px 20px;
    pointer-events: none;
  }

  .medieval-btn > * {
    position: relative;
    z-index: 1;
  }

  /* Primary - Golden */
  .medieval-btn-primary {
    background: linear-gradient(to bottom, rgb(234 179 8), rgb(202 138 4));
    border: 1px solid rgb(234 179 8 / 0.5);
    color: black;
    box-shadow: 0 2px 8px rgb(234 179 8 / 0.3);
  }

  .medieval-btn-primary:hover:not(:disabled) {
    background: linear-gradient(to bottom, rgb(250 204 21), rgb(234 179 8));
    border-color: rgb(250 204 21 / 0.6);
    box-shadow: 0 4px 16px rgb(234 179 8 / 0.4);
    transform: translateY(-1px);
  }

  .medieval-btn-primary:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: 0 1px 4px rgb(234 179 8 / 0.3);
  }

  /* Secondary - Dark with golden border */
  .medieval-btn-secondary {
    background: linear-gradient(to bottom, rgb(31 41 55 / 0.9), rgb(17 24 39 / 0.95));
    border: 1px solid rgb(234 179 8 / 0.3);
    color: rgb(234 179 8);
  }

  .medieval-btn-secondary:hover:not(:disabled) {
    background: linear-gradient(to bottom, rgb(55 65 81 / 0.9), rgb(31 41 55 / 0.95));
    border-color: rgb(234 179 8 / 0.5);
    box-shadow: 0 4px 16px rgb(234 179 8 / 0.15);
  }

  /* Danger - Red */
  .medieval-btn-danger {
    background: linear-gradient(to bottom, rgb(220 38 38), rgb(185 28 28));
    border: 1px solid rgb(248 113 113 / 0.3);
    color: white;
    box-shadow: 0 2px 8px rgb(220 38 38 / 0.3);
  }

  .medieval-btn-danger:hover:not(:disabled) {
    background: linear-gradient(to bottom, rgb(239 68 68), rgb(220 38 38));
    border-color: rgb(248 113 113 / 0.5);
    box-shadow: 0 4px 16px rgb(220 38 38 / 0.4);
  }
</style>
